<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×—×™×–×•×§ ×©×¨×™×¨×™ ×”× ×"×¨ - ×™×•××Ÿ ×”×¦×œ×—×•×ª ×¨×’×©×™×•×ª</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Heebo', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #FEF7F0 0%, #FFF5F5 50%, #FEF2F2 100%);
        }
        
        .tiger-shadow {
            box-shadow: 0 10px 25px rgba(239, 68, 68, 0.1);
        }
        
        .success-animation {
            animation: celebrate 0.8s ease-in-out;
        }
        
        @keyframes celebrate {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .belt-progress {
            background: linear-gradient(90deg, #EF4444 0%, #F97316 50%, #EAB308 100%);
        }
        
        .category-btn {
            transition: all 0.3s ease;
        }
        
        .category-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.15);
        }

        .page-transition {
            transition: all 0.3s ease-in-out;
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    
    <!-- Initial Registration Screen -->
    <div id="registrationScreen" class="page-transition">
        <div class="min-h-screen flex flex-col justify-center items-center p-4">
            <div class="bg-white rounded-3xl tiger-shadow p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <img src="https://cdn1.genspark.ai/user-upload-image/rmbg_generated/0_5b77bea6-587c-4ceb-8c88-afb24fbccc17" alt="× ××¨ ××—×•×§" class="w-24 h-16 mx-auto mb-4">
                    <h1 class="text-2xl font-bold text-gray-800 mb-2">×‘×¨×•×›×™× ×”×‘××™×!</h1>
                    <p class="text-gray-600">×‘×—×¨ ××ª ×¡×•×’ ×”××©×ª××© ×©×œ×š</p>
                </div>
                
                <div class="space-y-4">
                    <button onclick="selectUserType('family')" class="w-full bg-red-500 text-white py-4 rounded-2xl font-bold text-lg hover:bg-red-600 transition-colors">
                        <i class="fas fa-home ml-2"></i>
                        ××©×¤×—×”
                    </button>
                    <button onclick="selectUserType('therapist')" class="w-full bg-orange-500 text-white py-4 rounded-2xl font-bold text-lg hover:bg-orange-600 transition-colors">
                        <i class="fas fa-user-md ml-2"></i>
                        ××˜×¤×œ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Family Login Screen -->
    <div id="familyLoginScreen" class="page-transition hidden">
        <div class="min-h-screen flex flex-col justify-center items-center p-4">
            <div class="bg-white rounded-3xl tiger-shadow p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <img src="https://cdn1.genspark.ai/user-upload-image/rmbg_generated/0_5b77bea6-587c-4ceb-8c88-afb24fbccc17" alt="× ××¨ ××—×•×§" class="w-24 h-16 mx-auto mb-4">
                    <h1 class="text-2xl font-bold text-gray-800 mb-2">×›× ×™×¡×” ×œ××©×¤×—×•×ª</h1>
                    <p class="text-gray-600">×”×–×Ÿ ××ª ×¤×¨×˜×™ ×”×—× ×™×š/×”</p>
                </div>
                
                <form onsubmit="familyLogin(event)" class="space-y-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">×©× ×”×—× ×™×š/×”</label>
                        <input type="text" id="studentName" required class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">×¡×™×¡××”</label>
                        <input type="password" id="familyPassword" required class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none">
                    </div>
                    <button type="submit" class="w-full bg-red-500 text-white py-4 rounded-xl font-bold text-lg hover:bg-red-600 transition-colors">
                        ×›× ×™×¡×”
                    </button>
                </form>
                
                <button onclick="goBack()" class="w-full mt-4 text-gray-600 py-2 hover:text-gray-800 transition-colors">
                    ×—×–×¨×”
                </button>
            </div>
        </div>
    </div>

    <!-- Therapist Login Screen -->
    <div id="therapistLoginScreen" class="page-transition hidden">
        <div class="min-h-screen flex flex-col justify-center items-center p-4">
            <div class="bg-white rounded-3xl tiger-shadow p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <img src="https://cdn1.genspark.ai/user-upload-image/rmbg_generated/0_5b77bea6-587c-4ceb-8c88-afb24fbccc17" alt="× ××¨ ××—×•×§" class="w-24 h-16 mx-auto mb-4">
                    <h1 class="text-2xl font-bold text-gray-800 mb-2">×›× ×™×¡×” ×œ××˜×¤×œ×™×</h1>
                    <p class="text-gray-600">×§×•×“ ×’×™×©×” ×œ××˜×¤×œ×™×</p>
                </div>
                
                <form onsubmit="therapistLogin(event)" class="space-y-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">×§×•×“ ×’×™×©×”</label>
                        <input type="password" id="therapistCode" required class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none" placeholder="×”×–×Ÿ ××ª ×§×•×“ ×”×’×™×©×”">
                    </div>
                    <button type="submit" class="w-full bg-orange-500 text-white py-4 rounded-xl font-bold text-lg hover:bg-orange-600 transition-colors">
                        ×›× ×™×¡×”
                    </button>
                </form>
                
                <button onclick="goBack()" class="w-full mt-4 text-gray-600 py-2 hover:text-gray-800 transition-colors">
                    ×—×–×¨×”
                </button>
            </div>
        </div>
    </div>

    <!-- Family Dashboard -->
    <div id="familyDashboard" class="page-transition hidden">
        <div class="min-h-screen p-4">
            <!-- Header -->
            <div class="bg-white rounded-3xl tiger-shadow p-6 mb-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <img src="https://cdn1.genspark.ai/user-upload-image/rmbg_generated/0_5b77bea6-587c-4ceb-8c88-afb24fbccc17" alt="× ××¨ ××—×•×§" class="w-16 h-12 ml-3">
                        <div>
                            <h1 class="text-3xl font-bold text-gray-800">×—×™×–×•×§ ×©×¨×™×¨×™ ×”× ×"×¨</h1>
                            <p class="text-xl text-gray-600">×™×•××Ÿ ×”×”×¦×œ×—×•×ª ×©×œ <span id="studentNameDisplay" class="font-bold text-red-600"></span></p>
                        </div>
                    </div>
                    <img src="https://cdn1.genspark.ai/user-upload-image/rmbg_generated/0_0b1de0b1-e708-440e-a70d-f07632b4256d" alt="× ××¨ ×—×–×§" class="w-20 h-24">
                </div>
            </div>

            <!-- Belt Level Card -->
            <div class="bg-white rounded-3xl tiger-shadow p-6 mb-6">
                <div class="text-center">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">×”×¨××” ×©×œ×›× ×›×¨×’×¢</h2>
                    <div class="text-6xl mb-2" id="currentBeltEmoji">âšª</div>
                    <div class="text-2xl font-bold mb-4" id="currentBeltName">×—×’×•×¨×” ×œ×‘× ×”</div>
                    
                    <div class="bg-gray-200 rounded-full h-4 mb-2">
                        <div class="belt-progress h-4 rounded-full" id="progressBar" style="width: 0%"></div>
                    </div>
                    <p class="text-gray-600" id="progressText">0/5 × ×§×•×“×•×ª ×œ×¨××” ×”×‘××”</p>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-3 gap-4 mb-6">
                <div class="bg-white rounded-2xl tiger-shadow p-4 text-center">
                    <div class="text-2xl font-bold text-green-600" id="weeklySuccesses">7</div>
                    <div class="text-sm text-gray-600">×”×©×‘×•×¢</div>
                </div>
                <div class="bg-white rounded-2xl tiger-shadow p-4 text-center">
                    <div class="text-2xl font-bold text-orange-600" id="averageRating">2.5</div>
                    <div class="text-sm text-gray-600">×××•×¦×¢ ×©×‘×•×¢×™</div>
                </div>
                <div class="bg-white rounded-2xl tiger-shadow p-4 text-center">
                    <div class="text-2xl font-bold text-red-600" id="totalSuccesses">0</div>
                    <div class="text-sm text-gray-600">×¡×”"×› ×”×¦×œ×—×•×ª</div>
                </div>
            </div>

            <!-- Log Success Button -->
            <button onclick="showSuccessForm()" class="w-full bg-red-500 text-white py-4 rounded-2xl font-bold text-xl mb-6 hover:bg-red-600 transition-colors tiger-shadow">
                <i class="fas fa-plus ml-2"></i>
                ×ª×™×¢×•×“ ×”×¦×œ×—×” ×—×“×©×”
            </button>

            <!-- Recent Success -->
            <div class="bg-gradient-to-l from-orange-100 to-red-100 rounded-2xl p-4 mb-6">
                <div class="flex items-center">
                    <div class="text-2xl ml-3">ğŸ‘</div>
                    <div>
                        <div class="font-bold text-gray-800">×‘×× ×• × ×—× ×• ×œ×¢×–×•×¨ ×”×¦×œ×—×•×ª!</div>
                        <div class="text-sm text-gray-600">×œ×—×¥ ×¢×œ "×ª×™×¢×•×“ ×”×¦×œ×—×” ×—×“×©×”" ×›×“×™ ×œ×”×ª×—×™×œ</div>
                    </div>
                </div>
            </div>

            <!-- History Button -->
            <button onclick="showHistory()" class="w-full bg-gray-100 text-gray-700 py-4 rounded-2xl font-bold text-lg hover:bg-gray-200 transition-colors">
                <i class="fas fa-history ml-2"></i>
                ×”×™×¡×˜×•×¨×™×™×ª ×”×¦×œ×—×•×ª
            </button>
        </div>
    </div>

    <!-- Success Form -->
    <div id="successForm" class="page-transition hidden">
        <div class="min-h-screen p-4">
            <div class="bg-white rounded-3xl tiger-shadow p-6 mb-6">
                <div class="flex items-center justify-between mb-6">
                    <h1 class="text-2xl font-bold text-gray-800">×ª×™×¢×•×“ ×”×¦×œ×—×” ×—×“×©×”</h1>
                    <button onclick="closeSuccessForm()" class="text-gray-500 text-2xl">Ã—</button>
                </div>

                <form onsubmit="submitSuccess(event)">
                    <div class="mb-6">
                        <label class="block text-gray-700 font-medium mb-4">×‘×—×¨ ×§×˜×’×•×¨×™×”:</label>
                        <div class="grid grid-cols-1 gap-3">
                            <button type="button" onclick="selectCategory('emotion-identification')" class="category-btn text-right p-4 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition-all">
                                <i class="fas fa-heart text-red-500 ml-2"></i>
                                ×–×™×”×•×™ ×¨×’×©
                            </button>
                            <button type="button" onclick="selectCategory('initiating-interaction')" class="category-btn text-right p-4 border-2 border-gray-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition-all">
                                <i class="fas fa-handshake text-orange-500 ml-2"></i>
                                ×™×–×™××ª ××™× ×˜×¨××§×¦×™×”
                            </button>
                            <button type="button" onclick="selectCategory('positive-dialogue')" class="category-btn text-right p-4 border-2 border-gray-200 rounded-xl hover:border-yellow-500 hover:bg-yellow-50 transition-all">
                                <i class="fas fa-comments text-yellow-500 ml-2"></i>
                                ×“×™××œ×•×’ ×¤× ×™××™ ×—×™×•×‘×™
                            </button>
                            <button type="button" onclick="selectCategory('belonging-safety')" class="category-btn text-right p-4 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition-all">
                                <i class="fas fa-home text-green-500 ml-2"></i>
                                ×ª×—×•×©×ª ×©×™×™×›×•×ª ×•×‘×™×˜×—×•×Ÿ
                            </button>
                            <button type="button" onclick="selectCategory('active-participation')" class="category-btn text-right p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all">
                                <i class="fas fa-users text-blue-500 ml-2"></i>
                                ×”×©×ª×ª×¤×•×ª ×¤×¢×™×œ×”
                            </button>
                            <button type="button" onclick="selectCategory('emotional-regulation')" class="category-btn text-right p-4 border-2 border-gray-200 rounded-xl hover:border-purple-500 hover:bg-purple-50 transition-all">
                                <i class="fas fa-balance-scale text-purple-500 ml-2"></i>
                                ×•×™×¡×•×ª ×¨×’×©×™
                            </button>
                            <button type="button" onclick="selectCategory('coping-change')" class="category-btn text-right p-4 border-2 border-gray-200 rounded-xl hover:border-indigo-500 hover:bg-indigo-50 transition-all">
                                <i class="fas fa-exchange-alt text-indigo-500 ml-2"></i>
                                ×”×ª××•×“×“×•×ª ×¢× ×©×™× ×•×™
                            </button>
                            <button type="button" onclick="selectCategory('conflict-resolution')" class="category-btn text-right p-4 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition-all">
                                <i class="fas fa-handshake text-pink-500 ml-2"></i>
                                ×¤×ª×¨×•×Ÿ ×§×•× ×¤×œ×™×§×˜×™×
                            </button>
                            <button type="button" onclick="selectCategory('coping-frustration')" class="category-btn text-right p-4 border-2 border-gray-200 rounded-xl hover:border-red-600 hover:bg-red-50 transition-all">
                                <i class="fas fa-fist-raised text-red-600 ml-2"></i>
                                ×”×ª××•×“×“×•×ª ×¢× ×ª×¡×›×•×œ/×›×™×©×œ×•×Ÿ
                            </button>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="block text-gray-700 font-medium mb-2">×ª××¨ ××ª ×”×”×¦×œ×—×”:</label>
                        <textarea id="successDescription" required class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none h-32" placeholder="×¡×¤×¨ ×œ× ×• ××” ×§×¨×”..."></textarea>
                    </div>

                    <button type="submit" class="w-full bg-red-500 text-white py-4 rounded-xl font-bold text-lg hover:bg-red-600 transition-colors">
                        ×©××•×¨ ×”×¦×œ×—×”
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Success Celebration -->
    <div id="successCelebration" class="page-transition hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-3xl p-8 m-4 text-center success-animation">
            <div class="text-6xl mb-4">ğŸ‰</div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">×›×œ ×”×›×‘×•×“!</h2>
            <p class="text-gray-600 mb-6">×”×”×¦×œ×—×” × ×©××¨×” ×‘×”×¦×œ×—×”</p>
            <button onclick="closeCelebration()" class="bg-red-500 text-white px-8 py-3 rounded-xl font-bold hover:bg-red-600 transition-colors">
                ×”××©×š
            </button>
        </div>
    </div>

    <!-- Therapist Dashboard -->
    <div id="therapistDashboard" class="page-transition hidden">
        <div class="min-h-screen p-4">
            <div class="bg-white rounded-3xl tiger-shadow p-6 mb-6">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-bold text-gray-800">×œ×•×— ×‘×§×¨×” ××˜×¤×œ×™×</h1>
                    <button onclick="logout()" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-sign-out-alt"></i>
                        ×™×¦×™××”
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-white rounded-2xl tiger-shadow p-6 text-center">
                    <div class="text-3xl font-bold text-blue-600">24</div>
                    <div class="text-gray-600">××©×¤×—×•×ª ×¤×¢×™×œ×•×ª</div>
                </div>
                <div class="bg-white rounded-2xl tiger-shadow p-6 text-center">
                    <div class="text-3xl font-bold text-green-600">156</div>
                    <div class="text-gray-600">×¡×”"×› ×”×¦×œ×—×•×ª</div>
                </div>
            </div>

            <div class="bg-white rounded-3xl tiger-shadow p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">×¡×˜×˜×™×¡×˜×™×§×•×ª ×©×‘×•×¢×™×•×ª</h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center">
                        <span>×¨××ª ×—×’×•×¨×” ×××•×¦×¢×ª</span>
                        <span class="font-bold text-orange-600">×—×’×•×¨×” ×›×ª×•××”</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>×©×™×¢×•×¨ ×”×©×ª×ª×¤×•×ª</span>
                        <span class="font-bold text-green-600">87%</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>×”×¦×œ×—×•×ª ×”×©×‘×•×¢</span>
                        <span class="font-bold text-blue-600">43</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let selectedCategory = null;
        let userProgress = {
            currentBelt: 0,
            points: 0,
            totalSuccesses: 0,
            weeklySuccesses: 7,
            successes: []
        };

        const belts = [
            { name: '×—×’×•×¨×” ×œ×‘× ×”', emoji: 'âšª', pointsNeeded: 5 },
            { name: '×—×’×•×¨×” ×¦×”×•×‘×”', emoji: 'ğŸŸ¡', pointsNeeded: 5 },
            { name: '×—×’×•×¨×” ×›×ª×•××”', emoji: 'ğŸŸ ', pointsNeeded: 5 },
            { name: '×—×’×•×¨×” ×™×¨×•×§×”', emoji: 'ğŸŸ¢', pointsNeeded: 5 },
            { name: '×—×’×•×¨×” ×›×—×•×œ×”', emoji: 'ğŸ”µ', pointsNeeded: 5 },
            { name: '×—×’×•×¨×” ×—×•××”', emoji: 'ğŸŸ¤', pointsNeeded: 5 },
            { name: '×—×’×•×¨×” ×©×—×•×¨×”', emoji: 'âš«', pointsNeeded: 0 }
        ];

        const categories = {
            'emotion-identification': '×–×™×”×•×™ ×¨×’×©',
            'initiating-interaction': '×™×–×™××ª ××™× ×˜×¨××§×¦×™×”',
            'positive-dialogue': '×“×™××œ×•×’ ×¤× ×™××™ ×—×™×•×‘×™',
            'belonging-safety': '×ª×—×•×©×ª ×©×™×™×›×•×ª ×•×‘×™×˜×—×•×Ÿ',
            'active-participation': '×”×©×ª×ª×¤×•×ª ×¤×¢×™×œ×”',
            'emotional-regulation': '×•×™×¡×•×ª ×¨×’×©×™',
            'coping-change': '×”×ª××•×“×“×•×ª ×¢× ×©×™× ×•×™',
            'conflict-resolution': '×¤×ª×¨×•×Ÿ ×§×•× ×¤×œ×™×§×˜×™×',
            'coping-frustration': '×”×ª××•×“×“×•×ª ×¢× ×ª×¡×›×•×œ/×›×™×©×œ×•×Ÿ'
        };

        // Initialize app
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('staff') === 'true') {
                showScreen('therapistLoginScreen');
            } else {
                showScreen('registrationScreen');
            }
        };

        function showScreen(screenId) {
            // Hide all screens
            const screens = ['registrationScreen', 'familyLoginScreen', 'therapistLoginScreen', 'familyDashboard', 'successForm', 'therapistDashboard'];
            screens.forEach(screen => {
                document.getElementById(screen).classList.add('hidden');
            });
            
            // Show requested screen
            document.getElementById(screenId).classList.remove('hidden');
        }

        function selectUserType(type) {
            if (type === 'family') {
                showScreen('familyLoginScreen');
            } else if (type === 'therapist') {
                showScreen('therapistLoginScreen');
            }
        }

        function familyLogin(event) {
            event.preventDefault();
            const studentName = document.getElementById('studentName').value;
            const password = document.getElementById('familyPassword').value;
            
            if (studentName && password) {
                currentUser = {
                    type: 'family',
                    studentName: studentName
                };
                
                // Load user data
                loadUserData();
                
                document.getElementById('studentNameDisplay').textContent = studentName;
                updateDashboard();
                showScreen('familyDashboard');
            }
        }

        function therapistLogin(event) {
            event.preventDefault();
            const code = document.getElementById('therapistCode').value;
            
            if (code === 'staff2024') {
                currentUser = { type: 'therapist' };
                showScreen('therapistDashboard');
            } else {
                alert('×§×•×“ ×’×™×©×” ×©×’×•×™');
            }
        }

        function goBack() {
            showScreen('registrationScreen');
        }

        function logout() {
            currentUser = null;
            showScreen('registrationScreen');
        }

        function loadUserData() {
            const savedData = localStorage.getItem('tiger_belt_' + currentUser.studentName);
            if (savedData) {
                userProgress = JSON.parse(savedData);
            }
        }

        function saveUserData() {
            localStorage.setItem('tiger_belt_' + currentUser.studentName, JSON.stringify(userProgress));
        }

        function updateDashboard() {
            const currentBelt = belts[userProgress.currentBelt];
            document.getElementById('currentBeltEmoji').textContent = currentBelt.emoji;
            document.getElementById('currentBeltName').textContent = currentBelt.name;
            
            const progressPercent = userProgress.currentBelt === 6 ? 100 : (userProgress.points / currentBelt.pointsNeeded) * 100;
            document.getElementById('progressBar').style.width = progressPercent + '%';
            
            const pointsNeeded = userProgress.currentBelt === 6 ? 0 : currentBelt.pointsNeeded - userProgress.points;
            document.getElementById('progressText').textContent = 
                userProgress.currentBelt === 6 ? '×¨××” ××§×¡×™××œ×™×ª!' : `${userProgress.points}/${currentBelt.pointsNeeded} × ×§×•×“×•×ª ×œ×¨××” ×”×‘××”`;
            
            document.getElementById('totalSuccesses').textContent = userProgress.totalSuccesses;
            document.getElementById('weeklySuccesses').textContent = userProgress.weeklySuccesses;
            document.getElementById('averageRating').textContent = '2.5';
        }

        function showSuccessForm() {
            selectedCategory = null;
            document.getElementById('successDescription').value = '';
            // Reset category buttons
            const categoryBtns = document.querySelectorAll('.category-btn');
            categoryBtns.forEach(btn => {
                btn.classList.remove('border-red-500', 'bg-red-50');
                btn.classList.add('border-gray-200');
            });
            showScreen('successForm');
        }

        function closeSuccessForm() {
            showScreen('familyDashboard');
        }

        function selectCategory(category) {
            selectedCategory = category;
            
            // Reset all buttons
            const categoryBtns = document.querySelectorAll('.category-btn');
            categoryBtns.forEach(btn => {
                btn.classList.remove('border-red-500', 'bg-red-50');
                btn.classList.add('border-gray-200');
            });
            
            // Highlight selected button
            event.target.classList.remove('border-gray-200');
            event.target.classList.add('border-red-500', 'bg-red-50');
        }

        function submitSuccess(event) {
            event.preventDefault();
            
            if (!selectedCategory) {
                alert('×× × ×‘×—×¨ ×§×˜×’×•×¨×™×”');
                return;
            }
            
            const description = document.getElementById('successDescription').value;
            
            if (!description.trim()) {
                alert('×× × ×ª××¨ ××ª ×”×”×¦×œ×—×”');
                return;
            }
            
            // Add success to user progress
            const success = {
                category: selectedCategory,
                categoryName: categories[selectedCategory],
                description: description,
                date: new Date().toISOString(),
                timestamp: Date.now()
            };
            
            userProgress.successes.push(success);
            userProgress.totalSuccesses++;
            userProgress.points++;
            
            // Check for belt level up
            const currentBelt = belts[userProgress.currentBelt];
            if (userProgress.currentBelt < 6 && userProgress.points >= currentBelt.pointsNeeded) {
                userProgress.currentBelt++;
                userProgress.points = 0;
            }
            
            saveUserData();
            showCelebration();
        }

        function showCelebration() {
            document.getElementById('successCelebration').classList.remove('hidden');
        }

        function closeCelebration() {
            document.getElementById('successCelebration').classList.add('hidden');
            updateDashboard();
            showScreen('familyDashboard');
        }

        function showHistory() {
            alert('×”×™×¡×˜×•×¨×™×™×ª ×”×¦×œ×—×•×ª ×ª×•×¦×’ ×‘×§×¨×•×‘!');
        }
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDqU%2FNjod2yr7LHstaPwxCjpZOP9Gmp1AN2mbf%2Fa06aLUz8qyznip7R4WybpJwpZoE4a%2FTDIKdpS4rxe3B8dZ9dKUUbdB4Bdhz1DHlhXFZKkwqzxIWFyxG7QLqroCyOBhuFLTIsT4%2FWMQ4uGlSgp2ZJPedYBYSB6bC9MCZfVUvY78Ht7EWQFFoHcCercirTIKCVO2Vztr5Kroeagfa%2FWXsKep7tpaMTYExVnCqpO0sHUTwMxgz8tO4ObtS9xW4%2FzyZzJS%2FC8KVMjPpMNJYqDEssYW87qlETTRDerZVqtBWd%2FemBqBOASnR%2FKKVXeLvdh%2FTJdUrlVDwgD18CHLX3n63yuehK5Ic2WxvIbRAnOpAbOXGcumcC%2FwnddiQCuqc%2Bix4fhVlK6Cq6pXcwf8inUBiGcmkddDNnZ4JgCZIYgJykmhU4ZbAl4b9u2orFoxO7XJCvNLNTX1utb8YogQ3z1yRqMVIMaLSMuP6cx%2FaREtuAFNb6ZngAJwwL6AeggXkBbsuQ%3D%3D";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDqU/Njod2yr7LHstaPwxCjpZOP9Gmp1AN2mbf/a06aLUz8qyznip7R4WybpJwpZoE4a/TDIKdpS4rxe3B8dZ9dKUUbdB4Bdhz1DHlhXFZKkwqzxIWFyxG7QLqroCyOBhuFLTIsT4/WMQ4uGlSgp2ZJPedYBYSB6bC9MCZfVUvY78Ht7EWQFFoHcCercirTIKCVO2Vztr5Kroeagfa/WXsKep7tpaMTYExVnCqpO0sHUTwMxgz8tO4ObtS9xW4/zyZzJS/C8KVMjPpMNJYqDEssYW87qlETTRDerZVqtBWd/emBqBOASnR/KKVXeLvdh/TJdUrlVDwgD18CHLX3n63yuehK5Ic2WxvIbRAnOpAbOXGcumcC/wnddiQCuqc+ix4fhVlK6Cq6pXcwf8inUBiGcmkddDNnZ4JgCZIYgJykmhU4ZbAl4b9u2orFoxO7XJCvNLNTX1utb8YogQ3z1yRqMVIMaLSMuP6cx/aREtuAFNb6ZngAJwwL6AeggXkBbsuQ==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
